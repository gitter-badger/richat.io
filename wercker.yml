box: wercker/nodejs
# Build definition
build:
    # The steps that will be executed on build
    steps:

        - script:
            name: build all the things
            code: |
                npm cache clean
                npm install
                node_modules/.bin/bower install --config.interactive=false
                node_modules/.bin/gulp dist

        - script:
            name: echo nodejs information
            code: |
                echo "node version $(node -v) running"
                echo "npm version $(npm -v) running"

deploy:
    steps:
        - s3sync:
            source_dir: dist/
            bucket-url: $AWS_BUCKET_URL
            key-id: $AWS_ACCESS_KEY_ID
            key-secret: $AWS_SECRET_ACCESS_KEY